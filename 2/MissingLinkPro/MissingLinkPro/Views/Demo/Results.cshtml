@model MissingLinkPro.Models.ProcessHub

@{
    ViewBag.Title = "DemoResults";
}

<h2>DemoResults</h2>

<div style="padding-left: 30px;">
    <table style="float:left; margin-right: -125px;">
        <tr>
            <th>Legend</th><th> </th>
        </tr>
        <tr>
            <td><img src="~/Images/linkback_yes.png" alt="Links Back" /></td><td>Links Back</td>
        </tr>
        <tr>
            <td><img src="~/Images/linkback_no.png" alt="No Linkback" /></td><td>No Linkback</td>
        </tr>
        <tr>
            <td><img src="~/Images/linkback_err.png" alt="Error" /></td><td>Error</td>
        </tr>
    </table>
</div>

<table class="table2" id="stats-table" style="margin: 0px auto;">

    <tr>
    <td class="a">Search Query: </td>
        <td class="b">@Model.BingSearchQuery</td>
    </tr>
    @*<tr>
    <td class="a">Text Search Within Results: </td>
        <td class="b">@if (Model.PhraseSearchEnabled == true) { @Model.PhraseSearchString }
                                else { <text><h8>No Entry</h8></text>}
        </td>
    </tr>
    <tr> *@
    <td class="a">Excluding Phrase: </td>
        <td class="b">@if (Model.ExcludeEnabled == true) { @Model.ExcludeString }
                                else { <text><h8>No Entry</h8></text>}
        </td>
    </tr>
    <tr>
    <td class="a">Target Website To Link To: </td>
        <td class="b">@Model.ClientWebsite</td>
    </tr>
    <tr>
    <td class="a">Number of Results to Scan: </td>
        <td class="b">@Model.top</td>
    </tr>
    <tr>
    <td class="a">Type of Results: </td>
        <td class="b">@Model.ResultType </td>
    </tr>
    <tr>
    <td class="a">Exclude Results With Links to Target(s): </td>
        <td class="b">@if (Model.ExcludeLinkbackResults == true) { <text>yes</text> }
        else { <text>no</text> }</td>
    </tr>
    <tr>
    <td class="a">Number of Results Found: </td>
        <td class="b">@Model.ParsedResults.Count()</td>
    </tr>
    <tr>
        <td class="a">Results Omitted: </td>
        <td class="b">@Model.OmitCount</td>
    </tr>
    <tr>
        <td class="a">Total Time: </td>
        <td class="b">@Model.TotalRunTime sec</td>
    </tr>
    <tr>

    </tr>
</table>

<p class="text-success">@ViewBag.StatusMessage</p>

@*<div class="process-buttons" style="padding-top:30px; display:table;">
    <table>
        <tr>
    <td><a href="#" style="padding:5px;"><img src="@Url.Content("~/Images/btn_export.gif")"/></a></td>
    <td><a href="#" style="padding:5px;"><img src="@Url.Content("~/Images/btn_next.gif")"/></a></td>
            </tr>
        </table>
</div>*@

    @* @Html.ActionLink("Export All Mined Results to CSV", "ExportResults")<br>
    @Html.ActionLink("Next Set of Results (Will Add to Overall Collection)", "Process") *@

    <br>
@*    @if (Model.SearchErrorEncountered) {
    <p>ERROR: @Model.SearchErrorMsg</p>
    <br><br>
    }*@
        <table class="results-table">
        @if (Model.DisplayAllResults) {
          <tr>
          <th style="padding-right:30px;">Rank</th>
          <th>Result</th>
          <th style="padding-right:15px;">Linkback</th>
          @if (Model.ResultType.Equals("news")) { <th>Source</th> <th>Indexed</th> }
          </tr>
            <tr><td> </td></tr>
            foreach (MissingLinkPro.Models.ProcessHub.SearchResult s in Model.ParsedResults) {
                if (s.SkipThisResult) { continue; }
                <tr>
                    <td style="vertical-align:top; width:75px;"><b class="result-heading">@s.Id</b></td>
                    <td style="width:800px;">
                        <a href="@s.Url">@s.Title</a><br>
                        @s.Url<br>
                @if (s.ExceptionFound) {
                    @Html.Raw(" - ERROR: ") @s.ErrorMsg<br>
                    @*continue;*@
                }

                @*@if (Model.PhraseSearchEnabled) {
                    if (s.ContainsSearchPhrase) {
                        @Html.Raw(" - OK: Site contains instances of given phrase.")<br>
                    }
                    else {
                        @Html.Raw(" - NOTE: Given phrase not found.")<br>
                    }
                }*@
                        <br>
                    </td>
                    <td class="linkback-graphic">
                        @if (s.LinksToClientWebsite) {
                            <img src="~/Images/linkback_yes.png" />
                        }
                        else if (s.ExceptionFound) {
                            <img src="~/Images/linkback_err.png"/>
                        }
                        else {
                            <img src="~/Images/linkback_no.png"/>
                        }
                    </td>
                    @if (Model.ResultType.Equals("news")) {
                    <td style="vertical-align:top; padding-right:10px;">@s.Source</td>
                    <td style="vertical-align:top;">@s.Date</td>
                    }
                </tr>

            }
        }
        </table>
    <br><br><br><br>